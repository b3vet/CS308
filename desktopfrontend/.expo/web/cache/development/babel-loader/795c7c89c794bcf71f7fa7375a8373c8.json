{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Product.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport \"../css/Products.css\";\nimport Table from 'react-bootstrap/Table';\nimport { getProducts } from \"../utils/Common\";\n\nfunction Product(props) {\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      check = _useState4[0],\n      setCheck = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      product = _useState8[0],\n      setProduct = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      products = _useState10[0],\n      setProducts = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      comments = _useState12[0],\n      setComments = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      avgRating = _useState14[0],\n      setAvgRating = _useState14[1];\n\n  var _useState15 = useState(-1),\n      _useState16 = _slicedToArray(_useState15, 2),\n      pid = _useState16[0],\n      setPid = _useState16[1];\n\n  useEffect(function () {\n    setPid(props.match.params.pid);\n    setLoading(true);\n    var x = JSON.parse(getProducts()).products;\n    setProducts(x);\n\n    for (var i = 0; i < products.length; i++) {\n      console.log(products[i]);\n\n      if (products[i].pid == pid) {\n        setProduct(products[i]);\n        setCheck(true);\n      }\n    }\n\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/commentandrating/',\n      data: {\n        pid: pid\n      }\n    }).then(function (response) {\n      setComments(response.data.comments);\n      setAvgRating(response.data.avgRating);\n      console.log(comments);\n      console.log(avgRating);\n    }).catch(function (error) {\n      if (error.response.status === 401) setError(error.response.data.message);else setError(\"Something went wrong. Please try again later.\");\n    });\n    setLoading(false);\n  }, []);\n\n  if (loading) {\n    return React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 16\n      }\n    }, \"Loading...\");\n  } else {\n    if (!check) {\n      return React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 20\n        }\n      }, \"A PROBLEM OCCURED\");\n    } else {\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 17\n        }\n      }, React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }\n      }, product.name), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 42\n        }\n      })), React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 17\n        }\n      }, React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }\n      }, avgRating), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 39\n        }\n      }), comments.map(function (comment) {\n        return React.createElement(React.Fragment, null, React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 29\n          }\n        }, comment.comment), React.createElement(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 53\n          }\n        }));\n      })));\n    }\n  }\n}\n\nexport default Product;","map":{"version":3,"sources":["/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Product.js"],"names":["React","useState","useEffect","axios","Table","getProducts","Product","props","loading","setLoading","check","setCheck","error","setError","product","setProduct","products","setProducts","comments","setComments","avgRating","setAvgRating","pid","setPid","match","params","x","JSON","parse","i","length","console","log","method","url","data","then","response","catch","status","message","name","map","comment"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport '../css/Products.css';\r\nimport Table from 'react-bootstrap/Table';\r\nimport { getProducts } from '../utils/Common';\r\n\r\nfunction Product(props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [check, setCheck] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [product, setProduct] = useState(null);\r\n    const [products, setProducts] = useState([]);\r\n    const [comments, setComments] = useState([]);\r\n    const [avgRating, setAvgRating] = useState(0)\r\n    const [pid, setPid] = useState(-1)\r\n    useEffect(() => {\r\n        setPid(props.match.params.pid)\r\n        setLoading(true);\r\n        const x = JSON.parse(getProducts()).products\r\n        setProducts(x);\r\n        //console.log(JSON.parse(getProducts()).products)\r\n        //existingCheck = products.some(elem => elem.pid === pid)\r\n        \r\n        for(var i = 0; i < products.length; i++) {\r\n            console.log(products[i])\r\n            if(products[i].pid == pid) {\r\n                setProduct(products[i]);\r\n                setCheck(true);\r\n            }\r\n        }\r\n\r\n        axios({\r\n            method: 'post',\r\n            url: 'http://127.0.0.1:8000/api/commentandrating/',\r\n            data: {\r\n              pid: pid,\r\n            }\r\n          }).then(\r\n            response => {\r\n              setComments(response.data.comments);\r\n              setAvgRating(response.data.avgRating);\r\n              console.log(comments);\r\n              console.log(avgRating);\r\n            }\r\n          ).catch(\r\n            error => {\r\n              \r\n              if (error.response.status === 401) setError(error.response.data.message);\r\n              else setError(\"Something went wrong. Please try again later.\");\r\n            }\r\n          )\r\n        setLoading(false);\r\n    }, [])\r\n    \r\n    if(loading) {\r\n        return(<div>Loading...</div>)\r\n    }\r\n    else {\r\n        if(!check) {\r\n            return(<div>A PROBLEM OCCURED</div>)\r\n        }\r\n        else {\r\n            return (\r\n                <>\r\n                <div>\r\n                    <p>{product.name}</p><br></br>\r\n                </div>\r\n                <div>\r\n                    <p>{avgRating}</p><br></br>\r\n                    {\r\n                        comments.map(comment => (\r\n                            <>\r\n                            <p>{comment.comment}</p><br></br>\r\n                            </>\r\n                        ))\r\n                    }\r\n                </div>\r\n                </>\r\n            );\r\n        }\r\n    }\r\n}\r\n        \r\nexport default Product;"]},"metadata":{},"sourceType":"module"}