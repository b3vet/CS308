{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Product.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { getUser } from \"../utils/Common\";\nimport \"../css/Products.css\";\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport { Link } from 'react-router-dom';\n\nfunction Product(props) {\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      product = _useState6[0],\n      setProduct = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      comments = _useState8[0],\n      setComments = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      avgRating = _useState10[0],\n      setAvgRating = _useState10[1];\n\n  var _useState11 = useState(-1),\n      _useState12 = _slicedToArray(_useState11, 2),\n      pid = _useState12[0],\n      setPid = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      key = _useState14[0],\n      setKey = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      comment = _useState16[0],\n      setComment = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      rating = _useState18[0],\n      setRating = _useState18[1];\n\n  var _useState19 = useState(null),\n      _useState20 = _slicedToArray(_useState19, 2),\n      res = _useState20[0],\n      setRes = _useState20[1];\n\n  var _useState21 = useState(localStorage.getItem('user') || null),\n      _useState22 = _slicedToArray(_useState21, 2),\n      user = _useState22[0],\n      setUser = _useState22[1];\n\n  var handleSubmit = function handleSubmit(event) {\n    event.preventDefault();\n    var data = {\n      comment: {\n        pid: props.match.params.pid,\n        comment: comment,\n        uid: user.uid,\n        approved: false,\n        rating: rating\n      },\n      pid: props.match.params.pid\n    };\n    console.log(data);\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/addcommentandrating/',\n      data: {\n        comment: {\n          pid: props.match.params.pid,\n          comment: comment,\n          uid: user.uid,\n          approved: false,\n          rating: rating\n        },\n        pid: props.match.params.pid\n      }\n    }).then(function (response) {\n      setLoading(false);\n      setRes(\"Your comment will appear here when it is approved.\");\n    }).catch(function (error) {\n      setLoading(false);\n\n      if (error.response) {\n        setError(error.response.status);\n        console.log(error.response);\n      } else {\n        setError(error.message);\n        console.log(error.message);\n      }\n    });\n  };\n\n  var addToCart = function addToCart(event) {\n    var data = {\n      data: {\n        pid: props.match.params.pid,\n        uid: user.uid\n      }\n    };\n    console.log(data);\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/addtocart/',\n      data: {\n        comment: {\n          pid: props.match.params.pid,\n          uid: user.uid,\n          cartid: user.uid,\n          quantity: 0\n        }\n      }\n    }).then(function (response) {\n      setLoading(false);\n      setRes(\"Your comment will appear here when it is approved.\");\n    }).catch(function (error) {\n      setLoading(false);\n\n      if (error.response) {\n        setError(error.response.status);\n        console.log(error.response);\n      } else {\n        setError(error.message);\n        console.log(error.message);\n      }\n    });\n  };\n\n  useEffect(function () {\n    setRes(null);\n    setLoading(true);\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/singleproduct/',\n      data: {\n        pid: props.match.params.pid\n      }\n    }).then(function (response) {\n      setProduct(response.data.product[0]);\n      setComments(response.data.comments);\n      setAvgRating(response.data.avgRating);\n      setLoading(false);\n      console.log(comments);\n    }).catch(function (error) {\n      setLoading(false);\n\n      if (error.response) {\n        console.log(error.response.status);\n        console.log(error.response.data.error);\n      } else {\n        console.log('Error', error.message);\n      }\n    });\n    setPid(props.match.params.pid);\n  }, [props.match.params.pid]);\n\n  if (loading) {\n    return React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 24\n      }\n    }, \"Loading...\");\n  } else {\n    if (product == null) {\n      return React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 28\n        }\n      }, \"A PROBLEM OCCURED\");\n    } else {\n      return React.createElement(React.Fragment, null, React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }\n      }, React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 25\n        }\n      }, React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 25\n        }\n      }, React.createElement(\"img\", {\n        src: \"http://127.0.0.1:8000\" + product.image,\n        alt: \"Product's Image\",\n        width: 500,\n        height: 500,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }\n      })), React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 25\n        }\n      }, React.createElement(\"div\", {\n        class: \"Product-info\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 25\n        }\n      }, React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 25\n        }\n      }, product.name), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 48\n        }\n      }), React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 25\n        }\n      }, React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 28\n        }\n      }, product.price, \"$\")), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 55\n        }\n      }), React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 25\n        }\n      }, React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 28\n        }\n      }, \"Color: \"), product.color), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 61\n        }\n      }), React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 25\n        }\n      }, React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 28\n        }\n      }, \"Material: \"), product.material), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 67\n        }\n      }), React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 25\n        }\n      }, React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 28\n        }\n      }, \"Stock: \"), product.stock), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 61\n        }\n      }), React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 25\n        }\n      }, React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 28\n        }\n      }, \"Warranty: \"), product.warranty, \" year(s)\"), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 75\n        }\n      }), React.createElement(Button, {\n        variant: \"dark\",\n        onClick: \"addToCart\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }\n      }, \"Add to Cart\")))), React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 25\n        }\n      }, React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 25\n        }\n      }, React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 29\n        }\n      }, \"Description:\", \"\\n\"), React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 29\n        }\n      }, product.description), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 57\n        }\n      }), React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 29\n        }\n      }, \"Comments:\", \"\\n\"), comments.length === 0 ? React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 37\n        }\n      }, \"No comment added yet.\") : comments.map(function (comment) {\n        return React.createElement(\"p\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 39\n          }\n        }, comment.comment, \" RATING: \", comment.rating);\n      }), user ? React.createElement(React.Fragment, null, React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 29\n        }\n      }, \"Add Comment\", \"\\n\"), React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 29\n        }\n      }, \"Comment:\", React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 41\n        }\n      }), React.createElement(\"textarea\", {\n        value: comment,\n        onChange: function onChange(event) {\n          setComment(event.target.value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 33\n        }\n      })), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 37\n        }\n      }), React.createElement(\"select\", {\n        value: rating,\n        onChange: function onChange(event) {\n          setRating(event.target.value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 29\n        }\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 33\n        }\n      }, \"SELECT A RATING\"), React.createElement(\"option\", {\n        value: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 33\n        }\n      }, \"1\"), React.createElement(\"option\", {\n        value: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 33\n        }\n      }, \"2\"), React.createElement(\"option\", {\n        value: 3,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 33\n        }\n      }, \"3\"), React.createElement(\"option\", {\n        value: 4,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 33\n        }\n      }, \"4\"), React.createElement(\"option\", {\n        value: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 33\n        }\n      }, \"5\")), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 38\n        }\n      }), React.createElement(Button, {\n        type: \"submit\",\n        value: \"Submit\",\n        onClick: handleSubmit,\n        variant: \"dark\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 29\n        }\n      }, \"SUBMIT COMMENT\"), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 127\n        }\n      }), res && React.createElement(React.Fragment, null, React.createElement(\"small\", {\n        style: {\n          color: 'green'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 39\n        }\n      }, res), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 86\n        }\n      })), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 96\n        }\n      })) : React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 35\n        }\n      }, \"You must \", React.createElement(Link, {\n        to: \"/login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 47\n        }\n      }, \"login\"), \" to add comment.\")))));\n    }\n  }\n}\n\nexport default Product;","map":{"version":3,"sources":["/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Product.js"],"names":["React","useState","useEffect","axios","getUser","Container","Row","Col","Button","Tabs","Tab","Link","Product","props","loading","setLoading","error","setError","product","setProduct","comments","setComments","avgRating","setAvgRating","pid","setPid","key","setKey","comment","setComment","rating","setRating","res","setRes","localStorage","getItem","user","setUser","handleSubmit","event","preventDefault","data","match","params","uid","approved","console","log","method","url","then","response","catch","status","message","addToCart","cartid","quantity","image","name","price","color","material","stock","warranty","description","length","map","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { getUser } from '../utils/Common';\r\nimport '../css/Products.css';\r\nimport Container from 'react-bootstrap/Container'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Button from 'react-bootstrap/Button'\r\nimport Tabs from 'react-bootstrap/Tabs'\r\nimport Tab from 'react-bootstrap/Tab'\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Product(props) {\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [product, setProduct] = useState(null);\r\n    const [comments, setComments] = useState([]);\r\n    const [avgRating, setAvgRating] = useState(0)\r\n    const [pid, setPid] = useState(-1)\r\n    const [key, setKey] = useState(null);\r\n    const [comment, setComment] = useState(null);\r\n    const [rating, setRating] = useState(null);\r\n    const [res, setRes] = useState(null);\r\n    const [user, setUser] = useState(localStorage.getItem('user') || null);\r\n\r\n    const handleSubmit = (event) => {\r\n        \r\n        event.preventDefault()\r\n        const data = {\r\n            comment: {\r\n              pid: props.match.params.pid,\r\n              comment: comment,\r\n              uid: user.uid,\r\n              approved: false,\r\n              rating: rating,\r\n            },\r\n            pid: props.match.params.pid\r\n          };\r\n          console.log(data);\r\n        axios({\r\n            method: 'post',\r\n            url: 'http://127.0.0.1:8000/api/addcommentandrating/',\r\n            data: {\r\n              comment: {\r\n                pid: props.match.params.pid,\r\n                comment: comment,\r\n                uid: user.uid,\r\n                approved: false,\r\n                rating: rating,\r\n              },\r\n              pid: props.match.params.pid\r\n            }\r\n          }).then(\r\n            response => {\r\n              setLoading(false);\r\n              setRes(\"Your comment will appear here when it is approved.\");\r\n            }\r\n          ).catch(\r\n            error => {\r\n              setLoading(false);\r\n              if (error.response) {\r\n                setError(error.response.status)\r\n                console.log(error.response)\r\n              }\r\n              else {\r\n                  setError(error.message);\r\n                  console.log(error.message)\r\n              }\r\n            }\r\n          )\r\n    }\r\n\r\n    const addToCart = (event) => {\r\n        \r\n\r\n        const data = {\r\n            data: {\r\n              pid: props.match.params.pid,\r\n              uid: user.uid,\r\n            },\r\n          };\r\n          console.log(data);\r\n        axios({\r\n            method: 'post',\r\n            url: 'http://127.0.0.1:8000/api/addtocart/',\r\n            data: {\r\n              comment: {\r\n                pid: props.match.params.pid,\r\n                uid: user.uid,\r\n                cartid: user.uid,\r\n                quantity: 0,\r\n              },\r\n            }\r\n          }).then(\r\n            response => {\r\n              setLoading(false);\r\n              setRes(\"Your comment will appear here when it is approved.\");\r\n            }\r\n          ).catch(\r\n            error => {\r\n              setLoading(false);\r\n              if (error.response) {\r\n                setError(error.response.status)\r\n                console.log(error.response)\r\n              }\r\n              else {\r\n                  setError(error.message);\r\n                  console.log(error.message)\r\n              }\r\n            }\r\n          )\r\n    }\r\n\r\n    useEffect(() => {\r\n        setRes(null);\r\n        setLoading(true);\r\n        \r\n        axios({\r\n            method: 'post',\r\n            url: 'http://127.0.0.1:8000/api/singleproduct/',\r\n            data: {pid: props.match.params.pid},\r\n        }).then(\r\n            response => {\r\n                setProduct(response.data.product[0]);\r\n                setComments(response.data.comments);\r\n                setAvgRating(response.data.avgRating);\r\n                setLoading(false);\r\n\r\n                console.log(comments)\r\n            }\r\n            ).catch(\r\n                error => {\r\n                    setLoading(false);\r\n                    if (error.response) {\r\n                        console.log(error.response.status);\r\n                        console.log(error.response.data.error);\r\n                    } else {\r\n                        console.log('Error', error.message);\r\n                    }\r\n                }\r\n                )\r\n                setPid(props.match.params.pid)\r\n                \r\n            }, [props.match.params.pid])\r\n\r\n            if(loading) {\r\n                return(<div>Loading...</div>)\r\n            }\r\n            else {\r\n                if(product == null) {\r\n                    return(<div>A PROBLEM OCCURED</div>)\r\n                }\r\n                else {\r\n                    return (\r\n                        <>\r\n                        <Container>\r\n                        <Row>\r\n                        <Col>\r\n                        <img src={\"http://127.0.0.1:8000\"+product.image} alt = \"Product's Image\" width={500} height ={500}></img>\r\n                        </Col>\r\n                        <Col>\r\n                        <div class = \"Product-info\">\r\n                        <h1>{product.name}</h1><br></br>\r\n                        <b><p>{product.price}$</p></b><br></br>\r\n                        <p><b>Color: </b>{product.color}</p><br></br>\r\n                        <p><b>Material: </b>{product.material}</p><br></br>\r\n                        <p><b>Stock: </b>{product.stock}</p><br></br>\r\n                        <p><b>Warranty: </b>{product.warranty} year(s)</p><br></br>\r\n                        <Button variant=\"dark\" onClick='addToCart'>Add to Cart</Button>\r\n                        </div>\r\n                        </Col>\r\n                        </Row>\r\n                        <Row>\r\n                        <Col>\r\n                            <h2>Description:{\"\\n\"}</h2>\r\n                            <p>{product.description}</p><br></br>\r\n                            <h2>Comments:{\"\\n\"}</h2>\r\n                            {\r\n                                comments.length === 0 ? (\r\n                                    <p>No comment added yet.</p>\r\n                                )\r\n                                : \r\n                                (\r\n                                comments.map((comment) => {\r\n                                  return (\r\n                                      <p>{comment.comment} RATING: {comment.rating}</p>\r\n                                  )\r\n                                })\r\n                                )\r\n                            }\r\n                            {\r\n                            user ? <>\r\n                            <h2>Add Comment{\"\\n\"}</h2>\r\n                            \r\n                            <label>\r\n                                Comment:<br></br>\r\n                                <textarea value={comment} onChange={(event) => {setComment(event.target.value)}} />\r\n                            </label><br></br>\r\n                            <select value={rating} onChange={(event) => {setRating(event.target.value);}}>\r\n                                <option value=\"\">SELECT A RATING</option>\r\n                                <option value={1}>1</option>\r\n                                <option value={2}>2</option>\r\n                                <option value={3}>3</option>\r\n                                <option value={4}>4</option>\r\n                                <option value={5}>5</option>\r\n                            </select><br></br>\r\n                            <Button type=\"submit\" value=\"Submit\" onClick={handleSubmit} variant=\"dark\">SUBMIT COMMENT</Button><br />\r\n                            {res && <><small style={{ color: 'green' }}>{res}</small><br /></>}<br />\r\n                            </> : <p>You must <Link to=\"/login\" >login</Link> to add comment.</p>\r\n                            }\r\n                        </Col>\r\n                        </Row>\r\n                        </Container>\r\n                        </>\r\n                        );\r\n                    }\r\n                }\r\n}\r\n\r\n\r\nexport default Product;\r\n"]},"metadata":{},"sourceType":"module"}