{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Login.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { setUserSession, getUser, getRefreshToken, getAccessToken } from \"../utils/Common\";\n\nfunction Login(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var username = useFormInput('');\n  var password = useFormInput('');\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var handleLogin = function handleLogin() {\n    setError(null);\n    setLoading(true);\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/user/',\n      data: {\n        uname: username.value,\n        password: password.value\n      }\n    }).then(function (response) {\n      setLoading(false);\n      setUserSession(response.data.refresh, response.data.access, response.data.user);\n      console.log(getUser());\n      console.log(getRefreshToken());\n      console.log(getAccessToken());\n      props.history.push('/dashboard');\n    }).catch(function (error) {\n      setLoading(false);\n      if (error.response.status === 401) setError(error.response.data.message);else setError(\"Something went wrong. Please try again later.\");\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, \"Login\", React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 12\n    }\n  }), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 18\n    }\n  }), React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, \"Username\", React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }\n  }), React.createElement(\"input\", _extends({\n    type: \"text\"\n  }, username, {\n    autoComplete: \"new-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }))), React.createElement(\"div\", {\n    style: {\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, \"Password\", React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }), React.createElement(\"input\", _extends({\n    type: \"password\"\n  }, password, {\n    autoComplete: \"new-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }))), error && React.createElement(React.Fragment, null, React.createElement(\"small\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 19\n    }\n  }, error), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 66\n    }\n  })), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 76\n    }\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: loading ? 'Loading...' : 'Login',\n    onClick: handleLogin,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }\n  }), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 112\n    }\n  }));\n}\n\nvar useFormInput = function useFormInput(initialValue) {\n  var _useState5 = useState(initialValue),\n      _useState6 = _slicedToArray(_useState5, 2),\n      value = _useState6[0],\n      setValue = _useState6[1];\n\n  var handleChange = function handleChange(e) {\n    setValue(e.target.value);\n  };\n\n  return {\n    value: value,\n    onChange: handleChange\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Login.js"],"names":["React","useState","axios","setUserSession","getUser","getRefreshToken","getAccessToken","Login","props","loading","setLoading","username","useFormInput","password","error","setError","handleLogin","method","url","data","uname","value","then","response","refresh","access","user","console","log","history","push","catch","status","message","marginTop","color","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { setUserSession, getUser, getRefreshToken, getAccessToken } from '../utils/Common';\r\n \r\nfunction Login(props) {\r\n  const [loading, setLoading] = useState(false);\r\n  const username = useFormInput('');\r\n  const password = useFormInput('');\r\n  const [error, setError] = useState(null);\r\n \r\n  // handle button click of login form\r\n  //post will change \r\n  //response may change\r\n  const handleLogin = () => {\r\n    setError(null);\r\n    setLoading(true);\r\n   axios({\r\n    method: 'post',\r\n    url: 'http://127.0.0.1:8000/api/user/',\r\n    data: {\r\n      uname: username.value,\r\n      password: password.value\r\n    }\r\n  }).then(\r\n    response => {\r\n      setLoading(false);\r\n      setUserSession(response.data.refresh, response.data.access, response.data.user);\r\n      console.log(getUser())\r\n      console.log(getRefreshToken())\r\n      console.log(getAccessToken())\r\n      props.history.push('/dashboard');\r\n    }\r\n  ).catch(\r\n    error => {\r\n      setLoading(false);\r\n      if (error.response.status === 401) setError(error.response.data.message);\r\n      else setError(\"Something went wrong. Please try again later.\");\r\n    }\r\n  )\r\n  }\r\n \r\n  return (\r\n    <div>\r\n      Login<br /><br />\r\n      <div>\r\n        Username<br />\r\n        <input type=\"text\" {...username} autoComplete=\"new-password\" />\r\n      </div>\r\n      <div style={{ marginTop: 10 }}>\r\n        Password<br />\r\n        <input type=\"password\" {...password} autoComplete=\"new-password\" />\r\n      </div>\r\n      {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\r\n      <input type=\"button\" value={loading ? 'Loading...' : 'Login'} onClick={handleLogin} disabled={loading} /><br />\r\n    </div>\r\n  );\r\n}\r\n \r\nconst useFormInput = initialValue => {\r\n  const [value, setValue] = useState(initialValue);\r\n \r\n  const handleChange = e => {\r\n    setValue(e.target.value);\r\n  }\r\n  return {\r\n    value,\r\n    onChange: handleChange\r\n  }\r\n}\r\n \r\nexport default Login;"]},"metadata":{},"sourceType":"module"}