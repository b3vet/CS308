{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Cart.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { getUser } from \"../utils/Common\";\nimport \"../css/Products.css\";\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport { Link, Redirect, useHistory } from 'react-router-dom';\nimport { Ripple } from 'react-spinners-css';\nimport cookie from 'react-cookies';\n\nfunction Cart(props) {\n  var _this = this;\n\n  var _useState = useState(getUser()),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      products = _useState4[0],\n      setProducts = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      totalPrice = _useState6[0],\n      setTotalPrice = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var submit = function submit() {};\n\n  var getData = function getData() {\n    setLoading(true);\n\n    if (user == null) {\n      if (products == []) {\n        cookie.save(\"cart\", [], {\n          path: '/'\n        });\n      } else {\n        var x = cookie.load(\"cart\");\n        setProducts(x === undefined ? [] : x);\n        var total = 0;\n\n        if (x !== undefined) {\n          for (var _iterator = _createForOfIteratorHelperLoose(x), _step; !(_step = _iterator()).done;) {\n            var obj = _step.value;\n            total += obj.discountPrice * obj.quantity;\n          }\n        }\n\n        setTotalPrice(total);\n      }\n\n      setLoading(false);\n      return;\n    }\n\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/cart/',\n      data: {\n        uid: user.uid\n      }\n    }).then(function (response) {\n      setProducts(response.data.products);\n      setTotalPrice(response.data.total);\n      setLoading(false);\n    }).catch(function (error) {\n      if (error.response) {\n        console.log(error.response.data);\n      }\n\n      setLoading(false);\n    });\n  };\n\n  var increaseQuantity = function increaseQuantity(product) {\n    setLoading(true);\n\n    if (user == null) {\n      var x = products;\n      var idx = x.findIndex(function (p) {\n        return p.pid === product.pid;\n      });\n      x[idx] = _objectSpread(_objectSpread({}, x[idx]), {}, {\n        quantity: x[idx].quantity + 1\n      });\n      cookie.remove('cart', {\n        path: '/'\n      });\n      cookie.save(\"cart\", x, {\n        path: '/'\n      });\n      getData();\n      return;\n    }\n\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/addtocart/',\n      data: {\n        cart: {\n          pid: product.pid,\n          uid: user.uid,\n          quantity: 1\n        },\n        pid: product.pid\n      }\n    }).then(function (response) {\n      console.log(response.data);\n    }).catch(function (error) {\n      setLoading(false);\n\n      if (error.response) {\n        console.log(error.response.data);\n      } else {\n        console.log(error.message);\n      }\n    });\n    getData();\n  };\n\n  var removeFromCart = function removeFromCart(productHere) {\n    if (user == null) {\n      var x = products;\n      var idx = x.findIndex(function (p) {\n        return p.pid === productHere.pid;\n      });\n      x[idx] = _objectSpread(_objectSpread({}, x[idx]), {}, {\n        quantity: x[idx].quantity - 1\n      });\n\n      if (x[idx].quantity === 0) {\n        x = x.filter(function (product) {\n          return product.pid !== productHere.pid;\n        });\n      }\n\n      cookie.remove('cart', {\n        path: '/'\n      });\n      cookie.save(\"cart\", x, {\n        path: '/'\n      });\n      getData();\n      return;\n    }\n\n    setLoading(false);\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/removefromcart/',\n      data: {\n        cart: {\n          pid: productHere.pid,\n          quantity: 1,\n          uid: user.uid,\n          totalPrice: 0\n        }\n      }\n    }).then(function (response) {\n      console.log(response.data);\n    }).catch(function (error) {\n      if (error.response) {\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      } else {\n        console.log('Error', error.message);\n      }\n    });\n    getData();\n  };\n\n  useEffect(function () {\n    setLoading(true);\n\n    if (user == null) {\n      if (products == []) {\n        cookie.save(\"cart\", [], {\n          path: '/'\n        });\n      } else {\n        var x = cookie.load(\"cart\");\n        setProducts(x === undefined ? [] : x);\n        var total = 0;\n\n        if (x !== undefined) {\n          for (var _iterator2 = _createForOfIteratorHelperLoose(x), _step2; !(_step2 = _iterator2()).done;) {\n            var obj = _step2.value;\n            total += obj.discountPrice * obj.quantity;\n          }\n        }\n\n        setTotalPrice(total);\n      }\n\n      setLoading(false);\n    } else {\n      axios({\n        method: 'post',\n        url: 'http://127.0.0.1:8000/api/cart/',\n        data: {\n          uid: user.uid\n        }\n      }).then(function (response) {\n        setProducts(response.data.products);\n        setTotalPrice(response.data.total);\n        setLoading(false);\n      }).catch(function (error) {\n        if (error.response) {\n          console.log(error.response.data);\n        }\n\n        setLoading(false);\n      });\n    }\n  }, []);\n\n  if (loading) {\n    return React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginTop: 300\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 7\n      }\n    }, React.createElement(Ripple, {\n      color: \"#111\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (products.length == 0) {\n    return React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginTop: 300\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 7\n      }\n    }, React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 8\n      }\n    }, \"Your cart is empty. You can add products by shopping.\"));\n  }\n\n  return React.createElement(Container, {\n    style: {\n      marginTop: 100,\n      marginBottom: 40\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }\n  }, React.createElement(Col, {\n    xs: 10,\n    style: {\n      textAlign: 'left'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  }, React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, \"My Cart\"), React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 25\n    }\n  }, \"  \", products.length, \" items\"), React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }\n  }, products.map(function (p) {\n    return React.createElement(Container, {\n      style: {\n        borderBottom: '2px solid rgb(50,50,50)',\n        paddingBottom: 30,\n        marginTop: 30\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }\n    }, React.createElement(Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 19\n      }\n    }, React.createElement(Col, {\n      xs: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 21\n      }\n    }, React.createElement(\"img\", {\n      src: \"http://127.0.0.1:8000\" + p.image,\n      alt: \"Product's Image\",\n      style: {\n        height: 125,\n        width: 125\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 27\n      }\n    })), React.createElement(Col, {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        flexDirection: 'column',\n        textAlign: 'left'\n      },\n      xs: 8,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 21\n      }\n    }, React.createElement(Link, {\n      style: {\n        color: 'black',\n        textDecoration: 'none',\n        fontSize: 24\n      },\n      to: \"/product/\" + p.pid,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 25\n      }\n    }, p.name), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row',\n        justifyContent: 'space-between'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 25\n      }\n    }, React.createElement(\"p\", {\n      style: {\n        fontSize: 24,\n        fontWeight: 'bold'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 111\n      }\n    }, p.discountPrice, \" \\u20BA\"), React.createElement(\"p\", {\n      style: {\n        fontSize: 20\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 180\n      }\n    }, \"Quantity: \", p.quantity))), React.createElement(Col, {\n      xs: 2,\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'space-around'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 21\n      }\n    }, React.createElement(\"div\", {\n      className: \"pointed\",\n      onClick: function onClick() {\n        increaseQuantity(p);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 23\n      }\n    }, React.createElement(\"i\", {\n      style: {\n        height: 50,\n        width: 50,\n        borderRadius: 50,\n        border: '1px solid rgb(50,50,50)',\n        justifyContent: 'center',\n        alignItems: 'center',\n        display: 'flex'\n      },\n      class: \"fas fa-plus\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 87\n      }\n    })), React.createElement(\"div\", {\n      className: \"pointed\",\n      onClick: function onClick() {\n        removeFromCart(p);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 23\n      }\n    }, React.createElement(\"i\", {\n      style: {\n        height: 50,\n        width: 50,\n        borderRadius: 50,\n        border: '1px solid rgb(50,50,50)',\n        justifyContent: 'center',\n        alignItems: 'center',\n        display: 'flex'\n      },\n      class: p.quantity === 1 ? \"fas fa-trash\" : \"fas fa-minus\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 85\n      }\n    })))));\n  }))), React.createElement(Col, {\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }\n  }, React.createElement(Container, {\n    style: {\n      position: 'fixed',\n      border: '2px solid rgb(50,50,50)',\n      borderRadius: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }\n  }, React.createElement(Row, {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      textAlign: 'left',\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 11\n    }\n  }, React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 13\n    }\n  }, \"Price to Pay:\"), React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 13\n    }\n  }, totalPrice + 73, \"$\")), React.createElement(Row, {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      textAlign: 'left',\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 11\n    }\n  }, React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }\n  }, \"Products: \", totalPrice, \"$\"), React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }\n  }, \"Shipment Fee: 73$\")), React.createElement(Row, {\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 11\n    }\n  }, React.createElement(Button, {\n    onClick: function onClick() {\n      user ? props.history.push(\"/purchase\") : props.history.push(\"/login\", {\n        toPurchase: true\n      });\n    },\n    variant: \"dark\",\n    size: \"lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 13\n    }\n  }, \"Place Order\"))))));\n}\n\nexport default Cart;","map":{"version":3,"sources":["/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Cart.js"],"names":["React","useState","useEffect","axios","getUser","Container","Row","Col","Button","Link","Redirect","useHistory","Ripple","cookie","Cart","props","user","setUser","products","setProducts","totalPrice","setTotalPrice","loading","setLoading","submit","getData","save","path","x","load","undefined","total","obj","discountPrice","quantity","method","url","data","uid","then","response","catch","error","console","log","increaseQuantity","product","idx","findIndex","p","pid","remove","cart","message","removeFromCart","productHere","filter","status","headers","display","flexDirection","alignItems","justifyContent","marginTop","length","marginBottom","textAlign","map","borderBottom","paddingBottom","image","height","width","color","textDecoration","fontSize","name","fontWeight","borderRadius","border","position","padding","history","push","toPurchase"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { getUser } from '../utils/Common';\r\nimport '../css/Products.css';\r\nimport Container from 'react-bootstrap/Container'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Link, Redirect, useHistory } from 'react-router-dom';\r\n\r\nimport { Ripple } from 'react-spinners-css';\r\nimport cookie from 'react-cookies'\r\n\r\n\r\nfunction Cart(props) {\r\n\r\n    const [user,setUser] = useState(getUser())\r\n    const [products, setProducts] = useState([]);\r\n    const [totalPrice, setTotalPrice] = useState(0)\r\n    const [loading, setLoading] = useState(false)\r\n   // let history = useHistory();\r\n    \r\n    const submit = () => {\r\n\r\n    }\r\n\r\n    const getData = () => {\r\n      setLoading(true)\r\n      if(user == null) {\r\n        if(products == []) {\r\n          cookie.save(\"cart\", [], {path: '/'})\r\n        }\r\n        else {\r\n          let x = cookie.load(\"cart\")\r\n          setProducts(x === undefined ? [] : x);\r\n          var total = 0;\r\n          if(x !== undefined) {\r\n            for (const obj of x) {\r\n              total+=obj.discountPrice * obj.quantity\r\n            }\r\n          }\r\n          setTotalPrice(total)\r\n        }\r\n        setLoading(false)\r\n        return;\r\n      }\r\n        axios({\r\n            method: 'post',\r\n            url: 'http://127.0.0.1:8000/api/cart/',\r\n            data: {\r\n                uid: user.uid,\r\n            }\r\n          }).then(\r\n            response => {\r\n              //console.log(response.data)\r\n              setProducts(response.data.products);\r\n              setTotalPrice(response.data.total)\r\n              setLoading(false)\r\n            }\r\n          ).catch(\r\n            error => {\r\n              if(error.response) {\r\n                console.log(error.response.data)\r\n              }\r\n              setLoading(false)\r\n            }\r\n          )\r\n    }\r\n    const increaseQuantity = (product) => {\r\n      setLoading(true)\r\n      if(user == null) {\r\n        let x = products;\r\n        let idx = x.findIndex((p) => p.pid === product.pid)\r\n        x[idx] = {...x[idx], quantity: x[idx].quantity + 1}\r\n\r\n        cookie.remove('cart', { path: '/' })\r\n        cookie.save(\"cart\", x, { path: '/' })\r\n        getData()\r\n        return;\r\n      }\r\n      axios({\r\n        method: 'post',\r\n        url: 'http://127.0.0.1:8000/api/addtocart/',\r\n        data: {\r\n          cart: {\r\n            pid:product.pid,\r\n            uid: user.uid,\r\n            quantity: 1,\r\n          },\r\n          pid: product.pid,\r\n        }\r\n      }).then(\r\n        response => {\r\n          \r\n          console.log(response.data)\r\n          \r\n        }\r\n      ).catch(\r\n        error => {\r\n          setLoading(false);\r\n          if (error.response) {\r\n            \r\n            console.log(error.response.data)\r\n          }\r\n          else {\r\n              \r\n              console.log(error.message)\r\n          }\r\n        }\r\n      )\r\n      getData()\r\n      \r\n    }\r\n    const removeFromCart = (productHere) => {\r\n      if(user == null) {\r\n        let x = products;\r\n        let idx = x.findIndex((p) => p.pid === productHere.pid)\r\n        x[idx] = {...x[idx], quantity: x[idx].quantity - 1}\r\n\r\n        if(x[idx].quantity === 0) {\r\n          //means that we need to remove this product from the cart completely\r\n          x = x.filter(product => product.pid !== productHere.pid)\r\n        }\r\n        \r\n        \r\n        cookie.remove('cart', { path: '/' })\r\n        cookie.save(\"cart\", x, { path: '/' })\r\n        //setProducts(x);\r\n        //setTotalPrice(totalPrice - productHere.discountPrice)\r\n        //console.log(products)\r\n\r\n        getData()\r\n        return;\r\n      }\r\n      setLoading(false)\r\n      axios({\r\n        method: 'post',\r\n        url: 'http://127.0.0.1:8000/api/removefromcart/',\r\n        data: {\r\n            cart: {\r\n              pid:productHere.pid,\r\n              quantity: 1,\r\n              uid: user.uid,\r\n              totalPrice: 0\r\n            }\r\n          },\r\n      }).then(\r\n        response => {\r\n          console.log(response.data)\r\n          \r\n        }\r\n        ).catch(\r\n          error => {\r\n            \r\n            if (error.response) {\r\n                console.log(error.response.data);\r\n                console.log(error.response.status);\r\n                console.log(error.response.headers);\r\n            } else {\r\n                console.log('Error', error.message);\r\n            }\r\n          }\r\n        )\r\n        getData()\r\n    }\r\n    \r\n\r\n    useEffect(() => {\r\n      setLoading(true)\r\n      if(user == null) {\r\n        if(products == []) {\r\n          cookie.save(\"cart\", [], {path: '/'})\r\n        }\r\n        else {\r\n          let x = cookie.load(\"cart\")\r\n          setProducts(x === undefined ? [] : x);\r\n          var total = 0;\r\n          if(x !== undefined) {\r\n            for (const obj of x) {\r\n              total+=obj.discountPrice * obj.quantity\r\n            }\r\n          }\r\n          setTotalPrice(total)\r\n        }\r\n        setLoading(false)\r\n      }\r\n      else {\r\n        axios({\r\n            method: 'post',\r\n            url: 'http://127.0.0.1:8000/api/cart/',\r\n            data: {\r\n                uid: user.uid,\r\n            }\r\n          }).then(\r\n            response => {\r\n              //console.log(response.data)\r\n              setProducts(response.data.products);\r\n              setTotalPrice(response.data.total)\r\n              \r\n              setLoading(false)\r\n            }\r\n          ).catch(\r\n            error => {\r\n              if(error.response) {\r\n                console.log(error.response.data)\r\n              }\r\n              setLoading(false)\r\n            }\r\n          )\r\n      }\r\n      }, [])\r\n\r\n    if(loading) {\r\n      return(\r\n      <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', marginTop: 300}}>\r\n        <Ripple color=\"#111\" />\r\n      </div>\r\n      )\r\n    }\r\n   if(products.length == 0) {\r\n    return(\r\n      <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', marginTop: 300}}>\r\n       <h1>Your cart is empty. You can add products by shopping.</h1>\r\n      </div>\r\n      )\r\n   }\r\n    return (\r\n      \r\n        <Container style={{ marginTop: 100, marginBottom: 40}}>\r\n        <Row>\r\n        <Col xs={10} style={{textAlign: 'left'}}>\r\n        \r\n        <h1>My Cart</h1><h2>  {products.length} items</h2>\r\n\r\n      <div>\r\n          {\r\n          products.map((p) => {\r\n              return( \r\n                <Container style={{borderBottom: '2px solid rgb(50,50,50)', paddingBottom: 30, marginTop: 30}}>\r\n                  <Row>\r\n                    <Col xs={2}>\r\n                        \r\n                          <img src={\"http://127.0.0.1:8000\"+p.image} alt = \"Product's Image\" style={{height: 125, width:125}}></img>\r\n                        \r\n                    </Col>\r\n                    <Col style={{display: 'flex', justifyContent: 'space-around', flexDirection: 'column', textAlign: 'left'}} xs={8}>\r\n                        <Link style={{color: 'black', textDecoration: 'none', fontSize: 24}} to={`/product/${p.pid}`}>{p.name}</Link>\r\n                        <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between'}}><p style={{fontSize: 24, fontWeight: 'bold'}}>{p.discountPrice} â‚º</p><p style={{fontSize: 20}}>Quantity: {p.quantity}</p></div>\r\n                    </Col>\r\n                    <Col xs={2} style={{display: 'flex', flexDirection: 'column', justifyContent: 'space-around'}}>\r\n                      \r\n                      <div className=\"pointed\" onClick={() => {increaseQuantity(p)}} ><i style={{height: 50, width: 50, borderRadius: 50, border: '1px solid rgb(50,50,50)', justifyContent: 'center', alignItems: 'center', display: 'flex'}} class=\"fas fa-plus\"></i></div>\r\n                      \r\n                      <div className=\"pointed\" onClick={() => {removeFromCart(p)}} ><i style={{height: 50, width: 50, borderRadius: 50, border: '1px solid rgb(50,50,50)', justifyContent: 'center', alignItems: 'center', display: 'flex'}} class={p.quantity === 1 ? \"fas fa-trash\" : \"fas fa-minus\"}></i></div>\r\n                    </Col>\r\n                  </Row>\r\n                </Container>\r\n              )\r\n          })\r\n          }\r\n\r\n      </div>\r\n      </Col>\r\n      <Col xs={2} >\r\n        <Container style={{ position: 'fixed', border: '2px solid rgb(50,50,50)', borderRadius: 20}}>\r\n          <Row style={{display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', textAlign: 'left', padding: 20}}>\r\n            <h3>Price to Pay:</h3>\r\n            <h1>{totalPrice+73}$</h1>\r\n          </Row>\r\n          <Row style={{display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', textAlign: 'left', padding: 20}}>\r\n            <h5>Products: {totalPrice}$</h5>\r\n            \r\n            <h5>Shipment Fee: 73$</h5>\r\n          </Row>\r\n          <Row style={{padding: 20}}>\r\n            <Button onClick={() => {user ? props.history.push(`/purchase`) : props.history.push(\"/login\", {toPurchase: true})}} variant=\"dark\" size={\"lg\"}>Place Order</Button>\r\n          </Row>\r\n        </Container>\r\n      </Col>\r\n\r\n\r\n      </Row>\r\n      </Container>\r\n        );\r\n                    \r\n}\r\n\r\n\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}