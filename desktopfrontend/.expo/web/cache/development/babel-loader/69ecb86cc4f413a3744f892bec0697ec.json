{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Purchase.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { getUser } from \"../utils/Common\";\nimport \"../css/Products.css\";\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport { Link, Redirect } from 'react-router-dom';\nimport Grid from '@material-ui/core/Grid';\nimport { Ripple } from 'react-spinners-css';\n\nfunction Purchase(props) {\n  var _this = this;\n\n  var _useState = useState(getUser()),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      products = _useState4[0],\n      setProducts = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      totalPrice = _useState6[0],\n      setTotalPrice = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      agreed = _useState10[0],\n      setAgreed = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      cartNumber = _useState12[0],\n      setCartNumber = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      endMonth = _useState14[0],\n      setEndMonth = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      endYear = _useState16[0],\n      setEndYear = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      cvv = _useState18[0],\n      setCvv = _useState18[1];\n\n  var _useState19 = useState(''),\n      _useState20 = _slicedToArray(_useState19, 2),\n      delivery = _useState20[0],\n      setDelivery = _useState20[1];\n\n  var _useState21 = useState(''),\n      _useState22 = _slicedToArray(_useState21, 2),\n      invoiceAddress = _useState22[0],\n      setInvoiceAddress = _useState22[1];\n\n  var _useState23 = useState(''),\n      _useState24 = _slicedToArray(_useState23, 2),\n      name = _useState24[0],\n      setName = _useState24[1];\n\n  var _useState25 = useState(''),\n      _useState26 = _slicedToArray(_useState25, 2),\n      surname = _useState26[0],\n      setSurname = _useState26[1];\n\n  var _useState27 = useState(''),\n      _useState28 = _slicedToArray(_useState27, 2),\n      error = _useState28[0],\n      setError = _useState28[1];\n\n  function isNumeric(value) {\n    return /^-?\\d+$/.test(value);\n  }\n\n  var submit = function submit() {\n    if (!agreed) {\n      setError(\"You must agree to the terms of use!\");\n    } else {\n      if (cartNumber.length != 16) {\n        setError(\"Invalid card number!\");\n      } else if (!isNumeric(cartNumber)) {\n        setError(\"Invalid card number!\");\n      } else if (endMonth.length != 2) {\n        setError(\"Invalid end month!\");\n      } else if (endYear.length != 4) {\n        setError(\"Invalid end year!\");\n      } else if (!isNumeric(endMonth)) {\n        setError(\"Invalid end month!\");\n      } else if (!isNumeric(endYear)) {\n        setError(\"Invalid end year!\");\n      } else if (!isNumeric(cvv)) {\n        setError(\"Invalid CVV!\");\n      } else if (cvv.length != 3) {\n        setError(\"Invalid CVV\");\n      } else if (endYear > 2100) {\n        setError(\"End Year cannot be greater than 2100\");\n      } else if (endMonth > 12 || endMonth < 1) {\n        setError(\"Invalid end month!\");\n      } else {\n        axios({\n          method: 'post',\n          url: 'http://127.0.0.1:8000/api/order/',\n          data: {\n            uid: user.uid,\n            address: delivery,\n            invoiceAddress: invoiceAddress,\n            name: name,\n            surname: surname\n          }\n        }).then(function (response) {\n          console.log(response.data);\n          props.history.push('/success');\n        }).catch(function (error) {\n          if (error.response) {\n            setError(error.response.data.error);\n            console.log(error.response.data);\n            console.log(error.response.status);\n            console.log(error.response.headers);\n          } else {\n            console.log('Error', error.message);\n          }\n        });\n      }\n    }\n  };\n\n  useEffect(function () {\n    setLoading(true);\n    setAgreed(false);\n    setError('');\n    setEndYear(null);\n    setEndMonth(null);\n    setCartNumber(null);\n    setInvoiceAddress(null);\n    setDelivery(null);\n    setCvv(null);\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/cart/',\n      data: {\n        uid: user.uid\n      }\n    }).then(function (response) {\n      setProducts(response.data.products);\n      setTotalPrice(response.data.total);\n      setLoading(false);\n    }).catch(function (error) {\n      if (error.response) {\n        console.log(error.response.data);\n      }\n\n      setLoading(false);\n    });\n  }, []);\n\n  if (loading) {\n    return React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginTop: 300\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 7\n      }\n    }, React.createElement(Ripple, {\n      color: \"#111\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }));\n  }\n\n  if (products.length == 0) {\n    return React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginTop: 300\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 7\n      }\n    }, React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 8\n      }\n    }, \"It seems like there is nothing to purchase here. Why don't you start shopping?\"));\n  }\n\n  return React.createElement(Container, {\n    style: {\n      marginTop: 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, React.createElement(Col, {\n    xs: 10,\n    style: {\n      textAlign: 'left'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, React.createElement(Container, {\n    style: {\n      paddingBottom: 30,\n      marginTop: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 29\n    }\n  }, React.createElement(Row, {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      textAlign: 'left',\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 33\n    }\n  }, React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 37\n    }\n  }, \"Delivery Address\"), React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 37\n    }\n  }, React.createElement(Form.Control, {\n    value: delivery,\n    onChange: function onChange(e) {\n      return setDelivery(e.target.value);\n    },\n    style: {\n      width: 700\n    },\n    as: \"textarea\",\n    rows: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 41\n    }\n  }))), React.createElement(Row, {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      textAlign: 'left',\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 33\n    }\n  }, React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 33\n    }\n  }, \"Invoice Information\"), React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 37\n    }\n  }, React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 37\n    }\n  }, React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 37\n    }\n  }, React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 41\n    }\n  }, React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 45\n    }\n  }, \"Name\"), React.createElement(Form.Control, {\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    style: {\n      width: 320\n    },\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 45\n    }\n  }))), React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 37\n    }\n  }, React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 41\n    }\n  }, React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 45\n    }\n  }, \"Surname\"), React.createElement(Form.Control, {\n    value: surname,\n    onChange: function onChange(e) {\n      return setSurname(e.target.value);\n    },\n    style: {\n      width: 320\n    },\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 45\n    }\n  })))), React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 37\n    }\n  }, React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 41\n    }\n  }, React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 45\n    }\n  }, \"Invoice Address\"), React.createElement(Form.Control, {\n    value: invoiceAddress,\n    onChange: function onChange(e) {\n      return setInvoiceAddress(e.target.value);\n    },\n    style: {\n      width: 700\n    },\n    as: \"textarea\",\n    rows: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 45\n    }\n  }))))), React.createElement(Row, {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      textAlign: 'left',\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 33\n    }\n  }, React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 37\n    }\n  }, \"Order Details\"), products.map(function (product) {\n    return React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 49\n      }\n    }, product.name + \"    x\" + product.quantity + \" = \" + product.discountPrice * product.quantity + \"$\");\n  })), React.createElement(Row, {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      textAlign: 'left',\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 33\n    }\n  }, React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 37\n    }\n  }, \"Payment Information\"), React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 37\n    }\n  }, React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 41\n    }\n  }, React.createElement(Col, {\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 45\n    }\n  }, React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 49\n    }\n  }, React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 53\n    }\n  }, \"16-Digit Cart Number\"), React.createElement(Form.Control, {\n    value: cartNumber,\n    onChange: function onChange(e) {\n      return setCartNumber(e.target.value);\n    },\n    style: {\n      width: 300\n    },\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 53\n    }\n  }))), React.createElement(Col, {\n    xs: 6,\n    style: {\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'flex-start'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 45\n    }\n  }, React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 49\n    }\n  }, React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 53\n    }\n  }, \"Month   \"), React.createElement(Form.Control, {\n    value: endMonth,\n    onChange: function onChange(e) {\n      return setEndMonth(e.target.value);\n    },\n    style: {\n      width: 70\n    },\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 53\n    }\n  })), React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 49\n    }\n  }, \"/\"), React.createElement(Form.Group, {\n    style: {\n      marginLeft: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 49\n    }\n  }, React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 53\n    }\n  }, \"Year\"), React.createElement(Form.Control, {\n    value: endYear,\n    onChange: function onChange(e) {\n      return setEndYear(e.target.value);\n    },\n    style: {\n      width: 70\n    },\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 53\n    }\n  })), React.createElement(Form.Group, {\n    style: {\n      marginLeft: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 49\n    }\n  }, React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 53\n    }\n  }, \"CVV1\"), React.createElement(Form.Control, {\n    value: cvv,\n    onChange: function onChange(e) {\n      return setCvv(e.target.value);\n    },\n    style: {\n      width: 70\n    },\n    type: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 53\n    }\n  }))))))), error && React.createElement(\"p\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 39\n    }\n  }, error))), React.createElement(Col, {\n    xs: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, React.createElement(Container, {\n    style: {\n      position: 'fixed',\n      border: '2px solid rgb(50,50,50)',\n      borderRadius: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 25\n    }\n  }, React.createElement(Row, {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      textAlign: 'left',\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 29\n    }\n  }, React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 33\n    }\n  }, \"Price to Pay:\"), React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 33\n    }\n  }, totalPrice + 73, \"$\")), React.createElement(Row, {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'flex-start',\n      textAlign: 'left',\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 29\n    }\n  }, React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 33\n    }\n  }, \"Products: \", totalPrice, \"$\"), React.createElement(\"h5\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 33\n    }\n  }, \"Shipment Fee: 73$\")), React.createElement(Row, {\n    style: {\n      padding: 20,\n      display: 'flex',\n      flexDirection: 'row',\n      justifyContent: 'left',\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 29\n    }\n  }, React.createElement(Form.Check, {\n    type: \"checkbox\",\n    id: \"terms\",\n    label: \"I agree to the terms and conditions of use.\",\n    style: {\n      maxWidth: 200,\n      fontSize: 10\n    },\n    checked: agreed,\n    onChange: function onChange() {\n      return setAgreed(!agreed);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 29\n    }\n  })), React.createElement(Row, {\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 29\n    }\n  }, React.createElement(Button, {\n    onClick: function onClick() {\n      submit();\n    },\n    variant: \"dark\",\n    size: \"lg\",\n    disabled: !agreed,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 33\n    }\n  }, \"Place Order\")))))));\n}\n\nexport default Purchase;","map":{"version":3,"sources":["/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Purchase.js"],"names":["React","useState","useEffect","axios","getUser","Container","Row","Col","Button","Form","Tabs","Tab","Link","Redirect","Grid","Ripple","Purchase","props","user","setUser","products","setProducts","totalPrice","setTotalPrice","loading","setLoading","agreed","setAgreed","cartNumber","setCartNumber","endMonth","setEndMonth","endYear","setEndYear","cvv","setCvv","delivery","setDelivery","invoiceAddress","setInvoiceAddress","name","setName","surname","setSurname","error","setError","isNumeric","value","test","submit","length","method","url","data","uid","address","then","response","console","log","history","push","catch","status","headers","message","total","display","flexDirection","alignItems","justifyContent","marginTop","textAlign","paddingBottom","padding","e","target","width","map","product","quantity","discountPrice","marginLeft","color","position","border","borderRadius","maxWidth","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { getUser } from '../utils/Common';\r\nimport '../css/Products.css';\r\nimport Container from 'react-bootstrap/Container'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Button from 'react-bootstrap/Button'\r\nimport Form from 'react-bootstrap/Form'\r\nimport Tabs from 'react-bootstrap/Tabs'\r\nimport Tab from 'react-bootstrap/Tab'\r\nimport { Link, Redirect } from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { Ripple } from 'react-spinners-css';\r\n\r\n\r\nfunction Purchase(props) {\r\n\r\n    const [user,setUser] = useState(getUser())\r\n    const [products, setProducts] = useState([]);\r\n    const [totalPrice, setTotalPrice] = useState(0)\r\n    const [loading, setLoading] = useState(false)\r\n    const [agreed, setAgreed] = useState(false)\r\n    const [cartNumber, setCartNumber] = useState('')\r\n    const [endMonth, setEndMonth] = useState(null)\r\n    const [endYear, setEndYear] = useState(null)\r\n    const [cvv, setCvv] = useState(null)\r\n    const [delivery, setDelivery] = useState('')\r\n    const [invoiceAddress, setInvoiceAddress] = useState('')\r\n    const [name, setName] = useState('')\r\n    const [surname, setSurname] = useState('')\r\n    const [error, setError] = useState('')\r\n    function isNumeric(value) {\r\n        return /^-?\\d+$/.test(value);\r\n    }\r\n    const submit = () => {\r\n        if(!agreed) {\r\n            setError(\"You must agree to the terms of use!\")\r\n        }\r\n        else {\r\n            if(cartNumber.length != 16) {\r\n                setError(\"Invalid card number!\")\r\n            }\r\n            else if(!isNumeric(cartNumber)) {\r\n                setError(\"Invalid card number!\")\r\n            }\r\n            else if(endMonth.length != 2) {\r\n                setError(\"Invalid end month!\")\r\n            }\r\n            else if(endYear.length != 4) {\r\n                setError(\"Invalid end year!\")\r\n            }\r\n            else if(!isNumeric(endMonth)) {\r\n                setError(\"Invalid end month!\")\r\n            }\r\n            else if(!isNumeric(endYear)) {\r\n                setError(\"Invalid end year!\")\r\n            }\r\n            else if(!isNumeric(cvv)) {\r\n                setError(\"Invalid CVV!\")\r\n            }\r\n            else if(cvv.length != 3) {\r\n                setError(\"Invalid CVV\")\r\n            }\r\n            else if(endYear > 2100) {\r\n                setError(\"End Year cannot be greater than 2100\")\r\n            }\r\n            else if(endMonth > 12 || endMonth < 1) {\r\n                setError(\"Invalid end month!\")\r\n            }\r\n            else {\r\n                axios({\r\n                    method: 'post',\r\n                    url: 'http://127.0.0.1:8000/api/order/',\r\n                    data: {\r\n                        uid: user.uid,\r\n                        address: delivery,\r\n                        invoiceAddress: invoiceAddress,\r\n                        name: name,\r\n                        surname: surname\r\n                    }\r\n                })\r\n                  .then(\r\n                    response => {\r\n                      console.log(response.data)\r\n                      props.history.push('/success');        \r\n                    }\r\n                    ).catch(\r\n                      error => {\r\n                        \r\n                        if (error.response) {\r\n                            setError(error.response.data.error)\r\n                            console.log(error.response.data);\r\n                            console.log(error.response.status);\r\n                            console.log(error.response.headers);\r\n                        } else {\r\n                            console.log('Error', error.message);\r\n                        }\r\n                      }\r\n                    )\r\n            }\r\n        }\r\n    }\r\n    useEffect(() => {\r\n      setLoading(true)\r\n      setAgreed(false)\r\n      setError('')\r\n      setEndYear(null)\r\n      setEndMonth(null)\r\n      setCartNumber(null)\r\n      setInvoiceAddress(null)\r\n      setDelivery(null)\r\n      setCvv(null)\r\n        axios({\r\n            method: 'post',\r\n            url: 'http://127.0.0.1:8000/api/cart/',\r\n            data: {\r\n                uid: user.uid,\r\n            }\r\n          }).then(\r\n            response => {\r\n              //console.log(response.data)\r\n              setProducts(response.data.products);\r\n              setTotalPrice(response.data.total)\r\n              \r\n              setLoading(false)\r\n            }\r\n          ).catch(\r\n            error => {\r\n              if(error.response) {\r\n                console.log(error.response.data)\r\n              }\r\n              setLoading(false)\r\n            }\r\n          )\r\n      }, [])\r\n\r\n    if(loading) {\r\n      return(\r\n      <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', marginTop: 300}}>\r\n        <Ripple color=\"#111\" />\r\n      </div>\r\n      )\r\n    }\r\n   if(products.length == 0) {\r\n    return(\r\n      <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', marginTop: 300}}>\r\n       <h1>It seems like there is nothing to purchase here. Why don't you start shopping?</h1>\r\n      </div>\r\n      )\r\n   }\r\n    return (\r\n\r\n        <Container style={{ marginTop: 100}}>\r\n            <Row>\r\n                <Col xs={10} style={{textAlign: 'left'}}>\r\n                        <Form>\r\n                            <Container style={{paddingBottom: 30, marginTop: 30}}>\r\n                                <Row style={{display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', textAlign: 'left', padding: 20}}>\r\n                                    <h4>Delivery Address</h4>\r\n                                    <Form.Group>\r\n                                        <Form.Control value={delivery} onChange={(e) => setDelivery(e.target.value)} style={{width: 700}} as=\"textarea\" rows={2} />\r\n                                    </Form.Group>\r\n                                </Row>\r\n                                <Row style={{display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', textAlign: 'left', padding: 20}}>\r\n                                <h4>Invoice Information</h4>\r\n                                    <Container>\r\n                                    <Row>\r\n                                    <Col>\r\n                                        <Form.Group>\r\n                                            <Form.Label>Name</Form.Label>\r\n                                            <Form.Control value={name} onChange={(e) => setName(e.target.value)} style={{width: 320}} type=\"text\"/>\r\n                                        </Form.Group>\r\n                                    </Col>\r\n                                    <Col>\r\n                                        <Form.Group>\r\n                                            <Form.Label>Surname</Form.Label>\r\n                                            <Form.Control value={surname} onChange={(e) => setSurname(e.target.value)} style={{width: 320}} type=\"text\"/>\r\n                                        </Form.Group>\r\n                                    </Col>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Form.Group>\r\n                                            <Form.Label>Invoice Address</Form.Label>\r\n                                            <Form.Control value={invoiceAddress} onChange={(e) => setInvoiceAddress(e.target.value)} style={{width: 700}} as=\"textarea\" rows={2} />\r\n                                        </Form.Group>\r\n                                    </Row>\r\n                                    </Container>\r\n                                </Row>\r\n                                <Row style={{display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', textAlign: 'left', padding: 20}}>\r\n                                    <h4>Order Details</h4>\r\n                                    {\r\n                                        products.map((product) => {\r\n                                            return(\r\n                                                <p>{product.name + \"    x\" + product.quantity+ \" = \" + product.discountPrice * product.quantity + \"$\"}</p>\r\n                                            )\r\n                                        })\r\n                                    }\r\n                                </Row>\r\n                                <Row style={{display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', textAlign: 'left', padding: 20}}>\r\n                                    <h4>Payment Information</h4>\r\n                                    <Container>\r\n                                        <Row>\r\n                                            <Col xs = {6}>\r\n                                                <Form.Group>\r\n                                                    <Form.Label>16-Digit Cart Number</Form.Label>\r\n                                                    <Form.Control value={cartNumber} onChange={(e) => setCartNumber(e.target.value)} style={{width: 300}} type=\"text\"/>\r\n                                                </Form.Group>\r\n                                            </Col>\r\n                                            <Col xs={6} style={{display: 'flex', flexDirection: 'row', justifyContent: 'flex-start'}}>\r\n                                                <Form.Group>\r\n                                                    <Form.Label>Month   </Form.Label>\r\n                                                    <Form.Control value={endMonth} onChange={(e) => setEndMonth(e.target.value)} style={{width: 70}} type=\"number\"  />\r\n                                                </Form.Group>\r\n                                                <p>/</p>\r\n                                                <Form.Group style={{marginLeft: 10}}>\r\n                                                    <Form.Label>Year</Form.Label>\r\n                                                    <Form.Control value={endYear} onChange={(e) => setEndYear(e.target.value)} style={{width: 70}} type=\"number\"  />\r\n                                                </Form.Group>\r\n                                                <Form.Group style={{marginLeft: 30}}>\r\n                                                    <Form.Label>CVV1</Form.Label>\r\n                                                    <Form.Control value={cvv} onChange={(e) => setCvv(e.target.value)} style={{width: 70}} type=\"number\"  />\r\n                                                </Form.Group>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Container>\r\n                                </Row>\r\n                            </Container>\r\n                            {error && <p style={{color: 'red'}}>{error}</p>}\r\n                        </Form>\r\n                </Col>\r\n             \r\n                <Col xs={2} >\r\n                    <Form>\r\n                        <Container style={{ position: 'fixed', border: '2px solid rgb(50,50,50)', borderRadius: 20}}>\r\n                            <Row style={{display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', textAlign: 'left', padding: 20}}>\r\n                                <h3>Price to Pay:</h3>\r\n                                <h1>{totalPrice+73}$</h1>\r\n                            </Row>\r\n                            <Row style={{display: 'flex', flexDirection: 'column', justifyContent: 'flex-start', textAlign: 'left', padding: 20}}>\r\n                                <h5>Products: {totalPrice}$</h5>\r\n                                \r\n                                <h5>Shipment Fee: 73$</h5>\r\n                            </Row>\r\n                            <Row style={{padding: 20, display: 'flex', flexDirection: 'row', justifyContent: 'left', alignItems: 'center'}}>\r\n                            <Form.Check \r\n                                type={\"checkbox\"}\r\n                                id={\"terms\"}\r\n                                label={\"I agree to the terms and conditions of use.\"}\r\n                                style={{maxWidth: 200, fontSize: 10}}\r\n                                checked={agreed}\r\n                                onChange={() => setAgreed(!agreed)}\r\n                            />\r\n                            </Row>\r\n                            <Row style={{padding: 20}}>\r\n                                <Button onClick={() => {submit()}} variant=\"dark\" size={\"lg\"} disabled={!agreed}>Place Order</Button>\r\n                            </Row>\r\n                        </Container>\r\n                    </Form>\r\n                </Col>\r\n\r\n\r\n            </Row>\r\n        </Container>\r\n    );\r\n                    \r\n}\r\n\r\n\r\nexport default Purchase;\r\n"]},"metadata":{},"sourceType":"module"}