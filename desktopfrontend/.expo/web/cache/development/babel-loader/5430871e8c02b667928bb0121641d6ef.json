{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Login.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { setUserSession, getUser, getRefreshToken, getAccessToken } from \"../utils/Common\";\nimport { Link } from 'react-router-dom';\n\nfunction Login(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var username = useFormInput('');\n  var password = useFormInput('');\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var handleLogin = function handleLogin() {\n    setError(null);\n    setLoading(true);\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/user/',\n      data: {\n        uname: username.value,\n        password: password.value\n      }\n    }).then(function (response) {\n      setLoading(false);\n      setUserSession(response.data.refresh, response.data.access, response.data.user);\n      console.log(getUser());\n      console.log(getRefreshToken());\n      console.log(getAccessToken());\n      props.history.push('/');\n    }).catch(function (error) {\n      setLoading(false);\n\n      if (error.response) {\n        setError(error.response.status);\n      } else setError(error.message);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    class: \"Login-Container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, React.createElement(\"div\", {\n    class: \"Login-Float\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }), React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, \"Username\", React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }), React.createElement(\"input\", _extends({\n    type: \"text\"\n  }, username, {\n    autoComplete: \"new-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }))), React.createElement(\"div\", {\n    style: {\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, \"Password\", React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }), React.createElement(\"input\", _extends({\n    type: \"password\"\n  }, password, {\n    autoComplete: \"new-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }))), error && React.createElement(React.Fragment, null, React.createElement(\"small\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 19\n    }\n  }, error == 406 ? \"Invalid username or password!\" : \"Network error!\"), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 124\n    }\n  })), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 134\n    }\n  }), React.createElement(\"input\", {\n    type: \"button\",\n    value: loading ? 'Loading...' : 'Login',\n    onClick: handleLogin,\n    disabled: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 112\n    }\n  }), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 118\n    }\n  }), React.createElement(Link, {\n    to: \"/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \"Don't have an account? Click here to register.\")));\n}\n\nvar useFormInput = function useFormInput(initialValue) {\n  var _useState5 = useState(initialValue),\n      _useState6 = _slicedToArray(_useState5, 2),\n      value = _useState6[0],\n      setValue = _useState6[1];\n\n  var handleChange = function handleChange(e) {\n    setValue(e.target.value);\n  };\n\n  return {\n    value: value,\n    onChange: handleChange\n  };\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/Login.js"],"names":["React","useState","axios","setUserSession","getUser","getRefreshToken","getAccessToken","Link","Login","props","loading","setLoading","username","useFormInput","password","error","setError","handleLogin","method","url","data","uname","value","then","response","refresh","access","user","console","log","history","push","catch","status","message","marginTop","color","initialValue","setValue","handleChange","e","target","onChange"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { setUserSession, getUser, getRefreshToken, getAccessToken } from '../utils/Common';\r\nimport { Link } from 'react-router-dom';\r\nfunction Login(props) {\r\n  const [loading, setLoading] = useState(false);\r\n  const username = useFormInput('');\r\n  const password = useFormInput('');\r\n  const [error, setError] = useState(null);\r\n \r\n  // handle button click of login form\r\n  //post will change \r\n  //response may change\r\n  const handleLogin = () => {\r\n    setError(null);\r\n    setLoading(true);\r\n   axios({\r\n    method: 'post',\r\n    url: 'http://127.0.0.1:8000/api/user/',\r\n    data: {\r\n      uname: username.value,\r\n      password: password.value\r\n    }\r\n  }).then(\r\n    response => {\r\n      setLoading(false);\r\n      setUserSession(response.data.refresh, response.data.access, response.data.user);\r\n      console.log(getUser())\r\n      console.log(getRefreshToken())\r\n      console.log(getAccessToken())\r\n      props.history.push('/');\r\n    }\r\n  ).catch(\r\n    error => {\r\n      setLoading(false);\r\n      if (error.response) {\r\n        setError(error.response.status)\r\n      }\r\n      else setError(error.message);\r\n    }\r\n  )\r\n  }\r\n \r\n  return (\r\n    <div class=\"Login-Container\">\r\n    <div class=\"Login-Float\">\r\n      <br /><br />\r\n      <div>\r\n        Username<br />\r\n        <input type=\"text\" {...username} autoComplete=\"new-password\" />\r\n      </div>\r\n      <div style={{ marginTop: 10 }}>\r\n        Password<br />\r\n        <input type=\"password\" {...password} autoComplete=\"new-password\" />\r\n      </div>\r\n      {error && <><small style={{ color: 'red' }}>{error==406 ? \"Invalid username or password!\" : \"Network error!\"}</small><br /></>}<br />\r\n      <input type=\"button\" value={loading ? 'Loading...' : 'Login'} onClick={handleLogin} disabled={loading} /><br /><br />\r\n      <Link to=\"/register\">Don't have an account? Click here to register.</Link>\r\n    </div>\r\n    </div>\r\n  );\r\n}\r\n \r\nconst useFormInput = initialValue => {\r\n  const [value, setValue] = useState(initialValue);\r\n \r\n  const handleChange = e => {\r\n    setValue(e.target.value);\r\n  }\r\n  return {\r\n    value,\r\n    onChange: handleChange\r\n  }\r\n}\r\n \r\nexport default Login;"]},"metadata":{},"sourceType":"module"}