{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/admin/salesManager/EditDiscount.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Button from 'react-bootstrap/Form';\nimport Form from 'react-bootstrap/Form';\nimport { Link } from 'react-router-dom';\nimport { Ripple } from 'react-spinners-css';\n\nfunction EditDiscount(props) {\n  var _this = this;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      error = _useState4[0],\n      setError = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      did = _useState6[0],\n      setDid = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      allProducts = _useState8[0],\n      setAllProducts = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      selectedProducts = _useState10[0],\n      setSelectedProducts = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      discount = _useState12[0],\n      setDiscount = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      result = _useState14[0],\n      setResult = _useState14[1];\n\n  var addOrRemoveProduct = function addOrRemoveProduct(e, pid) {\n    if (selectedProducts.includes(pid)) {\n      setSelectedProducts(selectedProducts.filter(function (item) {\n        return item !== pid;\n      }));\n    } else {\n      setSelectedProducts([].concat(_toConsumableArray(selectedProducts), [pid]));\n    }\n  };\n\n  var submit = function submit(e) {\n    setLoading(true);\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/addproductstodiscount/',\n      data: {\n        did: props.match.params.did,\n        products: selectedProducts\n      }\n    }).then(function (response) {\n      setResult(response.data.success);\n      setLoading(false);\n    }).catch(function (error) {\n      setLoading(false);\n\n      if (error.response) {\n        console.log(error.response.status);\n        console.log(error.response.data.error);\n      } else {\n        console.log('Error', error.message);\n      }\n    });\n  };\n\n  useEffect(function () {\n    setLoading(true);\n    axios({\n      method: 'post',\n      url: 'http://127.0.0.1:8000/api/getadiscount/',\n      data: {\n        did: props.match.params.did\n      }\n    }).then(function (response) {\n      console.log(response.data);\n      setDiscount(response.data.discount);\n      setAllProducts(response.data.allproducts);\n      setSelectedProducts(response.data.selectedproducts);\n      setLoading(false);\n    }).catch(function (error) {\n      setLoading(false);\n\n      if (error.response) {\n        console.log(error.response.status);\n        setError(error.response.data.error);\n      } else {\n        console.log('Error', error.message);\n      }\n    });\n    setDid(props.match.params.did);\n  }, [props.match.params.did]);\n\n  if (loading) {\n    return React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        marginTop: 150\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, React.createElement(Ripple, {\n      color: \"#111\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 19\n      }\n    }));\n  }\n\n  return React.createElement(\"div\", {\n    style: {\n      textAlign: 'center',\n      padding: 10,\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, React.createElement(\"div\", {\n    style: {\n      fontSize: 22,\n      marginBottom: 40,\n      textAlign: 'left'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, React.createElement(\"p\", {\n    style: {\n      fontWeight: 'bold'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 78\n    }\n  }, \"You can add new products to apply the discount or remove some products from the range of this discount.\")), React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, allProducts.map(function (product) {\n    return React.createElement(React.Fragment, null, React.createElement(Form.Check, {\n      type: \"checkbox\",\n      defaultChecked: selectedProducts.includes(product.pid),\n      onChange: function onChange(e) {\n        return addOrRemoveProduct(e, product.pid);\n      },\n      label: product.name + \"   \" + product.price + \"$\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 31\n      }\n    }), React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 221\n      }\n    }));\n  }), React.createElement(Button, {\n    onClick: function onClick(e) {\n      return submit(e);\n    },\n    variant: \"dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, \"Save Discount\"), result && React.createElement(React.Fragment, null, React.createElement(\"small\", {\n    style: {\n      color: 'green'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 30\n    }\n  }, result), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 80\n    }\n  })), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 90\n    }\n  }), error && React.createElement(React.Fragment, null, React.createElement(\"small\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 29\n    }\n  }, error), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 76\n    }\n  })), React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 86\n    }\n  })));\n}\n\nexport default EditDiscount;","map":{"version":3,"sources":["/Users/atakansarac/Desktop/CS308/newrepo/desktopfrontend/src/pages/admin/salesManager/EditDiscount.js"],"names":["React","useState","useEffect","axios","Button","Form","Link","Ripple","EditDiscount","props","loading","setLoading","error","setError","did","setDid","allProducts","setAllProducts","selectedProducts","setSelectedProducts","discount","setDiscount","result","setResult","addOrRemoveProduct","e","pid","includes","filter","item","submit","method","url","data","match","params","products","then","response","success","catch","console","log","status","message","allproducts","selectedproducts","display","flexDirection","alignItems","justifyContent","marginTop","textAlign","padding","width","fontSize","marginBottom","fontWeight","map","product","name","price","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nimport Button from 'react-bootstrap/Form'\r\nimport Form from 'react-bootstrap/Form'\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport { Ripple } from 'react-spinners-css';\r\nfunction EditDiscount(props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [did, setDid] = useState(null);\r\n    const [allProducts, setAllProducts] = useState([])\r\n    const [selectedProducts, setSelectedProducts] = useState([])\r\n    const [discount, setDiscount] = useState(null)\r\n    const [result, setResult] = useState('')\r\n    const addOrRemoveProduct = (e, pid) => {\r\n        if (selectedProducts.includes(pid)) {\r\n            setSelectedProducts(selectedProducts.filter(item => item !== pid))\r\n        }\r\n        else {\r\n            setSelectedProducts([ ...selectedProducts, pid ])\r\n        }\r\n    }\r\n    const submit = (e) => {\r\n        setLoading(true);\r\n        \r\n        axios({\r\n            method: 'post',\r\n            url: 'http://127.0.0.1:8000/api/addproductstodiscount/',\r\n            data: {did: props.match.params.did, products: selectedProducts},\r\n        }).then(\r\n            response => {\r\n                setResult(response.data.success)\r\n                setLoading(false);\r\n            }\r\n            ).catch(\r\n                error => {\r\n                    setLoading(false);\r\n                    if (error.response) {\r\n                        console.log(error.response.status);\r\n                        console.log(error.response.data.error);\r\n                    } else {\r\n                        console.log('Error', error.message);\r\n                    }\r\n                }\r\n                )\r\n    }\r\n    useEffect(() => {\r\n        \r\n        setLoading(true);\r\n        \r\n        axios({\r\n            method: 'post',\r\n            url: 'http://127.0.0.1:8000/api/getadiscount/',\r\n            data: {did: props.match.params.did},\r\n        }).then(\r\n            response => {\r\n                console.log(response.data)\r\n                setDiscount(response.data.discount)\r\n                setAllProducts(response.data.allproducts)\r\n                setSelectedProducts(response.data.selectedproducts)\r\n                setLoading(false);\r\n            }\r\n            ).catch(\r\n                error => {\r\n                    setLoading(false);\r\n                    if (error.response) {\r\n                        console.log(error.response.status);\r\n                        setError(error.response.data.error);\r\n                    } else {\r\n                        console.log('Error', error.message);\r\n                    }\r\n                }\r\n                )\r\n                setDid(props.match.params.did)\r\n                \r\n            }, [props.match.params.did])\r\n            \r\n            if(loading) {\r\n                return(\r\n                <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', marginTop: 150}}>\r\n                  <Ripple color=\"#111\" />\r\n                </div>\r\n                )\r\n              }\r\n    return (\r\n        <div style={{textAlign: 'center', padding: 10, width: '100%'}}> \r\n            <div style={{fontSize: 22, marginBottom: 40, textAlign: 'left'}}><p style={{fontWeight: 'bold'}}>You can add new products to apply the discount or remove some products from the range of this discount.</p></div>\r\n            <Form>\r\n                {\r\n                    allProducts.map((product) => {\r\n                        return(\r\n                            <><Form.Check type=\"checkbox\" defaultChecked={selectedProducts.includes(product.pid)} onChange={(e) => addOrRemoveProduct(e, product.pid)} label={product.name + \"   \" + product.price + \"$\"} /><br /></>\r\n                        )\r\n                    })\r\n                }\r\n                <Button onClick = {(e) => submit(e)} variant = \"dark\">Save Discount</Button>\r\n                {result && <><small style={{ color: 'green' }}>{result}</small><br /></>}<br />\r\n                {error && <><small style={{ color: 'red' }}>{error}</small><br /></>}<br />\r\n            </Form>\r\n        </div>\r\n    )\r\n                \r\n                \r\n}\r\n                        \r\n                        \r\n                        \r\n                        \r\nexport default EditDiscount;\r\n"]},"metadata":{},"sourceType":"module"}